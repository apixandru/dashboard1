function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"+P1L":function(e,t,n){"use strict";n.r(t);var r,o,i,s=n("3Pt+"),a=n("RS3s"),l=n("vTDv"),c=n("tyNb"),u=n("fXoL"),d=((r=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||r)},r.\u0275cmp=u["\u0275\u0275defineComponent"]({type:r,selectors:[["ngx-users"]],decls:1,vars:0,template:function(e,t){1&e&&u["\u0275\u0275element"](0,"router-outlet")},directives:[c.h],encapsulation:2}),r),h=n("HDdC"),m=n("XNiG"),g=n("1G5W"),p=n("2NI8"),b=n("Cgdg"),f=n("McNs"),v=n("dwCd"),C=n("aceb"),w=n("6edl"),M=function(e){return e.VIEW="View",e.EDIT="Edit",e.ADD="Add",e.EDIT_SELF="EditSelf",e}({}),_=((o=function(){function e(t,n,r,o,i,s,a){_classCallCheck(this,e),this.usersService=t,this.router=n,this.route=r,this.tokenService=o,this.userStore=i,this.toasterService=s,this.fb=a,this.unsubscribe$=new m.a}return _createClass(e,[{key:"setViewMode",value:function(e){this.mode=e}},{key:"ngOnInit",value:function(){this.initUserForm(),this.loadUserData()}},{key:"initUserForm",value:function(){this.userForm=this.fb.group({id:this.fb.control(""),role:this.fb.control(""),login:this.fb.control("",[s.x.required,s.x.minLength(6),s.x.maxLength(20)]),email:this.fb.control("",[s.x.required,s.x.pattern(b.a)])})}},{key:"loadUserData",value:function(){var e=this.route.snapshot.paramMap.get("id");if(this.route.snapshot.queryParamMap.get("profile"))this.setViewMode(M.EDIT_SELF),this.loadUser();else if(e){var t=this.userStore.getUser().id;this.setViewMode(t.toString()===e?M.EDIT_SELF:M.EDIT),this.loadUser(e)}else this.setViewMode(M.ADD)}},{key:"loadUser",value:function(e){var t=this;(this.mode===M.EDIT_SELF?this.usersService.getCurrentUser():this.usersService.get(e)).pipe(Object(g.a)(this.unsubscribe$)).subscribe((function(e){t.userForm.setValue({id:e.id?e.id:"",role:e.role?e.role:"",login:e.login?e.login:"",email:e.email})}))}},{key:"convertToUser",value:function(e){return e}},{key:"save",value:function(){var e=this,t=this.convertToUser(this.userForm.value);this.mode===M.EDIT_SELF&&this.usersService.updateCurrent(t).subscribe((function(t){e.tokenService.set(new f.f(t,"email",new Date)),e.handleSuccessResponse()}),(function(t){e.handleWrongResponse()})),(new h.a).pipe(Object(g.a)(this.unsubscribe$)).subscribe((function(){return e.handleSuccessResponse()}),(function(t){return e.handleWrongResponse()}))}},{key:"handleSuccessResponse",value:function(){this.toasterService.success("","Item ".concat(this.mode===M.ADD?"created":"updated","!")),this.back()}},{key:"handleWrongResponse",value:function(){this.toasterService.danger("","This email has already taken!")}},{key:"back",value:function(){this.router.navigate(["/pages"])}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"login",get:function(){return this.userForm.get("login")}},{key:"email",get:function(){return this.userForm.get("email")}},{key:"canEdit",get:function(){return this.mode!==M.VIEW}}]),e}()).\u0275fac=function(e){return new(e||o)(u["\u0275\u0275directiveInject"](p.a),u["\u0275\u0275directiveInject"](c.c),u["\u0275\u0275directiveInject"](c.a),u["\u0275\u0275directiveInject"](f.k),u["\u0275\u0275directiveInject"](v.a),u["\u0275\u0275directiveInject"](C.dc),u["\u0275\u0275directiveInject"](s.c))},o.\u0275cmp=u["\u0275\u0275defineComponent"]({type:o,selectors:[["ngx-user"]],decls:20,vars:10,consts:[[1,"container",3,"formGroup"],[1,"form-group"],["for","inputLogin"],["nbInput","","id","inputLogin","formControlName","login","placeholder","Login",1,"form-control",3,"status"],["label","Login","minLength","6","maxLength","20",3,"showMinLength","showMaxLength","showRequired"],["for","inputEmail"],["nbInput","","id","inputEmail","formControlName","email","placeholder","Email",1,"form-control",3,"status"],["label","Email","min","1","max","120",3,"showPattern","showRequired"],["nbButton","","status","primary","hero","",3,"disabled","click"],["nbButton","","status","info","hero","",3,"click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"nb-card"),u["\u0275\u0275elementStart"](1,"nb-card-header"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"nb-card-body"),u["\u0275\u0275elementStart"](4,"div",0),u["\u0275\u0275elementStart"](5,"div",1),u["\u0275\u0275elementStart"](6,"label",2),u["\u0275\u0275text"](7,"Login"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](8,"input",3),u["\u0275\u0275element"](9,"ngx-validation-message",4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"div",1),u["\u0275\u0275elementStart"](11,"label",5),u["\u0275\u0275text"](12,"Email"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](13,"input",6),u["\u0275\u0275element"](14,"ngx-validation-message",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"nb-card-footer"),u["\u0275\u0275elementStart"](16,"button",8),u["\u0275\u0275listener"]("click",(function(){return t.save()})),u["\u0275\u0275text"](17,"Submit"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](18,"button",9),u["\u0275\u0275listener"]("click",(function(){return t.back()})),u["\u0275\u0275text"](19,"Back"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"]("",t.mode," user"),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("formGroup",t.userForm),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("status",(null!=t.login&&null!=t.login.errors&&t.login.errors.required||null!=t.login&&t.login.hasError("minlength")||null!=t.login&&t.login.hasError("maxlength"))&&t.login.touched?"danger":"primary"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("showMinLength",null==t.login?null:t.login.hasError("minlength"))("showMaxLength",null==t.login?null:t.login.hasError("maxlength"))("showRequired",(null==t.login?null:null==t.login.errors?null:t.login.errors.required)&&t.login.touched),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("status",(null!=t.email&&null!=t.email.errors&&t.email.errors.required||null!=t.email&&t.email.hasError("pattern"))&&t.email.touched?"danger":"primary"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("showPattern",(null==t.email?null:t.email.hasError("pattern"))&&t.email.touched)("showRequired",(null==t.email?null:null==t.email.errors?null:t.email.errors.required)&&t.email.touched),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("disabled",!t.userForm.valid))},directives:[C.z,C.C,C.y,s.o,s.g,C.bb,s.b,s.n,s.f,w.a,C.A,C.m],styles:[".nb-theme-default   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.25rem}.nb-theme-default   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;flex-wrap:wrap;justify-content:space-around}.nb-theme-default   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:20rem}[dir=ltr]   .nb-theme-default   [_nghost-%COMP%]   -shadowcsshost   button[_ngcontent-%COMP%]{margin:0 .75rem 0 0}[dir=rtl]   .nb-theme-default   [_nghost-%COMP%]   -shadowcsshost   button[_ngcontent-%COMP%]{margin:0 0 0 .75rem}.nb-theme-dark   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.25rem}.nb-theme-dark   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;flex-wrap:wrap;justify-content:space-around}.nb-theme-dark   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:20rem}[dir=ltr]   .nb-theme-dark   [_nghost-%COMP%]   -shadowcsshost   button[_ngcontent-%COMP%]{margin:0 .75rem 0 0}[dir=rtl]   .nb-theme-dark   [_nghost-%COMP%]   -shadowcsshost   button[_ngcontent-%COMP%]{margin:0 0 0 .75rem}.nb-theme-cosmic   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.25rem}.nb-theme-cosmic   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;flex-wrap:wrap;justify-content:space-around}.nb-theme-cosmic   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:20rem}[dir=ltr]   .nb-theme-cosmic   [_nghost-%COMP%]   -shadowcsshost   button[_ngcontent-%COMP%]{margin:0 .75rem 0 0}[dir=rtl]   .nb-theme-cosmic   [_nghost-%COMP%]   -shadowcsshost   button[_ngcontent-%COMP%]{margin:0 0 0 .75rem}.nb-theme-corporate   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.25rem}.nb-theme-corporate   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;flex-wrap:wrap;justify-content:space-around}.nb-theme-corporate   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:20rem}[dir=ltr]   .nb-theme-corporate   [_nghost-%COMP%]   -shadowcsshost   button[_ngcontent-%COMP%]{margin:0 .75rem 0 0}[dir=rtl]   .nb-theme-corporate   [_nghost-%COMP%]   -shadowcsshost   button[_ngcontent-%COMP%]{margin:0 0 0 .75rem}"]}),o),y=n("pfsP"),P=[{path:"",component:d,children:[{path:"edit/:id",canActivate:[y.a],component:_},{path:"current",component:_},{path:"add",canActivate:[y.a],component:_}]}],O=((i=function e(){_classCallCheck(this,e)}).\u0275mod=u["\u0275\u0275defineNgModule"]({type:i}),i.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(e){return new(e||i)},imports:[[c.g.forChild(P)],c.g]}),i),k=n("gcnP"),E=n("h+2I");n.d(t,"UsersModule",(function(){return I}));var x,S=[C.j,C.n,C.D,C.cb,C.Zb,C.uc,C.zb,C.Ib,C.mb,C.Z,C.Qb,C.Q,C.cb],I=((x=function e(){_classCallCheck(this,e)}).\u0275mod=u["\u0275\u0275defineNgModule"]({type:x}),x.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(e){return new(e||x)},providers:[],imports:[[l.a,k.AuthModule,a.d,O,E.a,s.u].concat(S)]}),x)}}]);